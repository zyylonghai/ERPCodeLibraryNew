<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ErpCode企业管理系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="ok-admin v2.0">
    <meta name="description" content="ok-admin v2.0">
    <link href="css/okadmin.css" rel="stylesheet" />
    <!--<link href="lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="lib/bootstrap/dist/js/bootstrap.js"></script>
    <script src="lib/jquery/dist/jquery.js"></script>-->
</head>
<body class="layui-layout-body">
    <!-- 更换主体 Eg:orange_theme|blue_theme -->
    <div class="layui-layout layui-layout-admin okadmin blue_theme">
        <!--头部导航-->
        <div class="layui-header okadmin-header">
            <ul class="layui-nav layui-layout-left">
                <li class="layui-nav-item layui-this">
                    <a class="ok-menu ok-show-menu" href="javascript:" title="菜单切换">
                        <i class="layui-icon layui-icon-shrink-right"></i>
                    </a>
                </li>
                <!--天气信息-->
                <!--
                <li class="ok-nav-item ok-hide-md">
                    <div class="weather-ok">
                        <iframe frameborder="0" scrolling="no" class="iframe-style" src="pages/weather.html" frameborder="0"></iframe>
                    </div>
                </li>
                 -->
            </ul>
            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item ok-input-search">
                    <input id="appprognm" type="text" placeholder="搜索功能..." class="layui-input layui-input-search">
                </li>
                <li class="layui-nav-item">
                    <a class="ok-refresh" href="javascript:" title="搜索">
                        <i class="layui-icon layui-icon-search"></i>
                    </a>
                </li>
                <li class="no-line layui-nav-item layui-hide-xs layui-this">
                    <a id="notice" class="flex-vc pr10 pl10" href="javascript:">
                        <i class="ok-icon ok-icon-notice icon-head-i" title="系统公告"></i>
                        <span class="layui-badge-dot"></span>
                        <cite></cite>
                    </a>
                </li>

                <li class="no-line layui-nav-item layui-hide-xs">
                    <a id="lock" class="flex-vc pr10 pl10" href="javascript:">
                        <i class="ok-icon ok-icon-lock icon-head-i" title="锁屏"></i><cite></cite>
                    </a>
                </li>

                <li class="layui-nav-item layui-hide-xs">
                    <a id="fullScreen" class=" pr10 pl10" href="javascript:">
                        <i class="layui-icon layui-icon-screen-full"></i>
                    </a>
                </li>

                <li class="no-line layui-nav-item">
                    <a id="appuserimghref" href="javascript:">
                        <img id="userimg" src="images/avatar.png" class="layui-nav-img">
                    </a>
                    <dl id="userInfo" class="layui-nav-child layui-anim layui-anim-upbit">
                        <dd><a lay-id="u-1" href="javascript:" data-url="pages/member/user.html">个人中心 </a></dd>
                        <!--<dd><a lay-id="u-2" href="javascript:" data-url="pages/member/user-info.html">基本资料</a></dd>-->
                        <dd><a lay-id="u-3" href="javascript:" data-url="pages/funcpage.html?prog=appsetting">系统设置</a></dd>
                        <dd><a lay-id="u-4" href="javascript:" data-url="pages/sys/appexceptionsetting.html">异常日志设置</a></dd>
                        <dd>
                            <hr>
                        </dd>
                        <dd><a href="javascript:void(0)" id="logout">退出登录</a></dd>
                    </dl>
                </li>
            </ul>
        </div>
        <!--遮罩层-->
        <div class="ok-make"></div>
        <!--左侧导航区域-->
        <div class="layui-side layui-side-menu okadmin-bg-20222A ok-left">
            <div class="layui-side-scroll okadmin-side">
                <div class="okadmin-logo">ErpCode1.0</div>
                <div class="user-photo">
                    <a class="img" title="我的头像">
                        <img src="images/avatar.png" class="userAvatar">
                    </a>
                    <p>你好！<span id="userName" class="userName">bobi</span>, 欢迎登录</p>
                </div>
                <!--左侧导航菜单-->
                <ul id="navBar" class="layui-nav okadmin-nav okadmin-bg-20222A layui-nav-tree" style="height: 724px;">
                    <li class="layui-nav-item layui-this">
                        <a lay-id="1" data-url="pages/HomePage.html" is-close="true"><i class="ok-icon"></i><cite>首页</cite></a>
                    </li>
                    <li class="layui-nav-item">
                        <a id="5"><i class="ok-icon"></i><cite>后台应用开发</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="2-2" data-url="pages/sys/ProgPage.html" is-close="true"><i class="layui-icon"></i><cite>功能开发</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="2-3" data-url="pages/sys/default.html" is-close="true"><i class="layui-icon"></i><cite>新建功能</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="2-4" data-url="pages/sys/A4ReportSetting.html" is-close="true"><i class="layui-icon"></i><cite>A4报告设计</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="2-5" data-url="pages/Reportpage.html?prog=checkrpt" is-close="true"><i class="layui-icon"></i><cite>检验单报告</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="2-6" data-url="pages/sys/MultiLanguage.html" is-close="true"><i class="layui-icon"></i><cite>多语言维护</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="2-7" data-url="pages/sys/ReportSetting.html" is-close="true"><i class="layui-icon"></i><cite>报表设计</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="2-8" data-url="pages/sys/Tenantpage.html" is-close="true"><i class="layui-icon"></i><cite>租户管理</cite></a>
                            </dd>
                            <!--<dd>
        <a lay-id="2-3" data-url="pages/funcpage.html?prog=JOLE" is-close="true"><i class="layui-icon"></i><cite>角色</cite></a>
    </dd>-->
                        </dl>
                    </li>
                    <!--<li class="layui-nav-item">
                        <a><i class="layui-icon"></i><cite>会员管理</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="3-1" data-url="pages/member/user.html" is-close="true"><i class="layui-icon">2</i><cite>用户列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="3-2" data-url="pages/member/role.html" is-close="true"><i class="layui-icon"></i><cite>角色列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="3-3" data-url="pages/member/permission.html" is-close="true"><i class="layui-icon"></i><cite>权限列表</cite></a>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="layui-icon"></i><cite>图表管理</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a><i class="ok-icon">?</i><cite>地图</cite></a>
                                <dl class="layui-nav-child">
                                    <dd>
                                        <a lay-id="4-1-1" data-url="pages/chart/chart-china.html" is-close="true"><i class="layui-icon"></i><cite>中国地图</cite></a>
                                    </dd>
                                    <dd>
                                        <a lay-id="4-1-2" data-url="pages/chart/chart-area.html" is-close="true"><i class="layui-icon"></i><cite>区域地图</cite></a>
                                    </dd>
                                </dl>
                            </dd>
                            <dd>
                                <a><i class="ok-icon ok-icon-shuju1"></i><cite>数据图</cite></a>
                                <dl class="layui-nav-child">
                                    <dd>
                                        <a lay-id="4-2-1" data-url="pages/chart/chart1.html" is-close="true"><i class="layui-icon"></i><cite>统计图</cite></a>
                                    </dd>
                                    <dd>
                                        <a lay-id="4-2-2" data-url="pages/chart/chart2.html" is-close="true"><i class="layui-icon"></i><cite>折线图</cite></a>
                                    </dd>
                                    <dd>
                                        <a lay-id="4-2-3" data-url="pages/chart/chart4.html" is-close="true"><i class="layui-icon"></i><cite>馅饼图</cite></a>
                                    </dd>
                                    <dd>
                                        <a lay-id="4-2-4" data-url="pages/chart/chart5.html" is-close="true"><i class="layui-icon"></i><cite>圆形图</cite></a>
                                    </dd>
                                    <dd>
                                        <a lay-id="4-2-5" data-url="pages/chart/chart6.html" is-close="true"><i class="layui-icon"></i><cite>指数图</cite></a>
                                    </dd>
                                </dl>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="layui-icon"></i><cite>常用页面</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="5-1" data-url="pages/often/article.html" is-close="true"><i class="layui-icon"></i><cite>文章列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="5-2" data-url="pages/often/message.html" is-close="true"><i class="layui-icon"></i><cite>留言列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="5-3" data-url="pages/often/product.html" is-close="true"><i class="layui-icon"></i><cite>产品列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="5-4" data-url="pages/often/download.html" is-close="true"><i class="layui-icon"></i><cite>下载列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="5-5" data-url="pages/often/link.html" is-close="true"><i class="layui-icon"></i><cite>链接列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="5-6" data-url="pages/often/task.html" is-close="true"><i class="layui-icon"></i><cite>任务列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="5-7" data-url="pages/often/image.html" is-close="true"><i class="layui-icon"></i><cite>图片列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="5-8" data-url="pages/often/bbs.html" is-close="true"><i class="layui-icon"></i><cite>帖子列表</cite></a>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="ok-icon"></i><cite>系统管理</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="6-1" data-url="pages/system/setup.html" is-close="true"><i class="layui-icon"></i><cite>系统设置</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="6-2" data-url="pages/system/log.html" is-close="true"><i class="layui-icon"></i><cite>日志列表</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="6-3" data-url="pages/system/shield.html" is-close="true"><i class="layui-icon"></i><cite>屏蔽词</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="6-4" data-url="pages/login.html" target="_blank" is-close="true"><i class="layui-icon"></i><cite>登录页面</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="6-5" data-url="pages/system/403.html" is-close="true"><i class="layui-icon"></i><cite>403页面</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="6-6" data-url="pages/system/404.html" is-close="true"><i class="layui-icon"></i><cite>404页面</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="6-7" data-url="pages/system/500.html" is-close="true"><i class="layui-icon"></i><cite>500页面</cite></a>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="layui-icon"></i><cite>文本编辑</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="7-1" data-url="pages/txtedit/Neditor.html" is-close="true"><i class="layui-icon"></i><cite>Neditor</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="7-2" data-url="pages/txtedit/wangEditor.html" is-close="true"><i class="layui-icon"></i><cite>wangEditor</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="7-3" data-url="pages/txtedit/CKEditor.html" is-close="true"><i class="layui-icon"></i><cite>CKEditor</cite></a>
                            </dd>
                            <dd><a lay-id="7-4" data-url="pages/txtedit/layedit.html" is-close="true"><i class="layui-icon"></i><cite>layedit</cite></a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="layui-icon"></i><cite>数据表格</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="8-1" data-url="pages/datatable/datatables.html" is-close="true"><i class="layui-icon"></i><cite>Datatables</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="8-2" data-url="pages/datatable/bsgrid.html" is-close="true"><i class="layui-icon"></i><cite>bsgrid</cite></a>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="ok-icon"></i><cite>多级导航</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a><i class="layui-icon"></i><cite>购物网站</cite></a>
                                <dl class="layui-nav-child">
                                    <dd>
                                        <a lay-id="9-1-1" data-url="https://www.jd.com" is-close="true"><i class="layui-icon"></i><cite>京东</cite></a>
                                    </dd>
                                    <dd>
                                        <a lay-id="9-1-2" data-url="https://www.suning.com" is-close="true"><i class="layui-icon"></i><cite>苏宁</cite></a>
                                    </dd>
                                    <dd>
                                        <a><i class="layui-icon"></i><cite>阿里</cite></a>
                                        <dl class="layui-nav-child">
                                            <dd>
                                                <a lay-id="9-1-3-1" data-url="https://www.taobao.com" is-close="true"><i class="layui-icon"></i><cite>淘宝</cite></a>
                                            </dd>
                                            <dd>
                                                <a><i class="layui-icon"></i><cite>天猫</cite></a>
                                                <dl class="layui-nav-child">
                                                    <dd>
                                                        <a lay-id="9-1-3-2-1" data-url="https://chaoshi.tmall.com" is-close="true"><i class="layui-icon"></i><cite>天猫超市</cite></a>
                                                    </dd>
                                                    <dd>
                                                        <a lay-id="9-1-3-2-2" data-url="https://3c.tmall.com" is-close="true"><i class="layui-icon"></i><cite>天猫电器</cite></a>
                                                    </dd>
                                                </dl>
                                            </dd>
                                        </dl>
                                    </dd>
                                </dl>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="ok-icon ok-icon-yooxi"></i><cite>框架使用</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="10-1" data-url="pages/help/ok_font.html" is-close="true"><i class="layui-icon"></i><cite>字体图标</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="10-2" data-url="pages/help/plug_directory.html" is-close="true"><i class="layui-icon"></i><cite>插件目录</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="10-3" data-url="pages/help/nav_operate.html" is-close="true"><i class="layui-icon"></i><cite>内部添加导航</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="10-4" data-url="pages/help/nav_icon.html" is-close="true"><i class="layui-icon"></i><cite>导航的图标</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="10-5" data-url="pages/help/nav_parameter.html" is-close="true"><i class="layui-icon"></i><cite>导航的参数</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="10-6" data-url="pages/help/okUtils.html" is-close="true"><i class="layui-icon"></i><cite>okUtils</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="10-7" data-url="pages/help/okLayer.html" is-close="true"><i class="layui-icon"></i><cite>okLayer</cite></a>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a><i class="layui-icon"></i><cite>第三方库</cite></a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a lay-id="11-1" data-url="pages/tripartite/qrcode.html" is-close="true"><cite>jquery.qrcode.js</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-2" data-url="pages/tripartite/countup.html" is-close="true"><cite>jquery.countup.js</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-3" data-url="pages/tripartite/okCookie.html" is-close="true"><cite>okCookie</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-4" data-url="pages/tripartite/okToastr.html" is-close="true"><cite>okToastr</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-5" data-url="pages/tripartite/okMd5.html" is-close="true"><cite>okMd5</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-6" data-url="pages/tripartite/okBarcode.html" is-close="true"><cite>okBarcode</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-7" data-url="pages/tripartite/okNprogress.html" is-close="true"><cite>okNprogress</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-8" data-url="pages/tripartite/okSweetAlert2.html" is-close="true"><cite>okSweetAlert2</cite></a>
                            </dd>
                            <dd>
                                <a lay-id="11-9" data-url="pages/tripartite/okAnimate.html" is-close="true"><cite>okAnimate</cite></a>
                            </dd>
                        </dl>
                    </li>-->
                </ul>
            </div>
        </div>

        <!-- 内容主体区域 -->
        <div class="content-body">
            <div class="layui-tab ok-tab" lay-filter="ok-tab" lay-allowclose="true" lay-unauto="">
                <div data-id="left" id="okLeftMove" class="ok-icon ok-icon-back okadmin-tabs-control move-left okNavMove"></div>
                <div data-id="right" id="okRightMove" class="ok-icon ok-icon-right okadmin-tabs-control move-right okNavMove"></div>
                <div class="layui-icon okadmin-tabs-control ok-right-nav-menu" style="right: 0;">
                    <ul class="okadmin-tab">
                        <li class="no-line okadmin-tab-item">
                            <div class="okadmin-link layui-icon-down" href="javascript:;"></div>
                            <dl id="tabAction" class="okadmin-tab-child layui-anim-upbit layui-anim">
                                <dd><a data-num="1" href="javascript:">关闭当前标签页</a></dd>
                                <dd><a data-num="2" href="javascript:">关闭其他标签页</a></dd>
                                <dd><a data-num="3" href="javascript:">关闭所有标签页</a></dd>
                            </dl>
                        </li>
                    </ul>
                </div>

                <ul id="tabTitle" class="layui-tab-title ok-tab-title not-scroll" style="left: 0px;">
                    <li class="layui-this" lay-id="1" tab="index">
                        <i class="ok-icon"></i>
                        <cite is-close="false">首页</cite>
                        <i class="layui-icon layui-unselect layui-tab-close">?</i>
                    </li>
                </ul>

                <div id="tabContent" class="layui-tab-content ok-tab-content">
                    <div class="layui-tab-item layui-show">
                        这是首页55555
                    </div>
                </div>
            </div>
        </div>
        <!--底部信息-->
        <div class="layui-footer okadmin-text-center">
            Copyright ?2020-?2020 ERPCODE v1.0 All Rights Reserved
            <!--<button class="layui-btn layui-btn-danger layui-btn-xs donate">捐赠作者</button>
            <button class="layui-btn layui-btn-danger layui-btn-xs communication">QQ群交流</button>-->
        </div>
    </div>
    <div class="yy"></div>
    <!--js逻辑-->
    <script src="lib/jquery/dist/jquery.js"></script>
    <script src="lib/layui/layui.js"></script>
    <script src="js/okadmin.js"></script>
    <!--<script src="js/ajaxBus.js"></script>-->
    <script src="js/appcom.js"></script>
    <script>
        $load(function () {
            getAccountInfo();
            LoadMenus();
        });
        function getAccountInfo() {
            let token = getCookie("apptick");
            $.ajax({
                type: 'get',
                url: '/Author/Account/GetAccountInfo/Account',
                data: {},
                dataType: "json",
                //headers: {
                //    'Content-Type': "application/x-www-form-urlencoded",
                //    'Authorization': "Bearer " + token
                //},
                beforeSend: function (request) {
                    let o = { Parameter: token, Scheme: "Bearer" };
                    request.setRequestHeader("Authorization", "Bearer " + token);
                },
                success: function (response) {
                    $('#userName').html(response.Data.userNm);
                    //document.getElementById('appuserimghref').innerText = response.Data.userNm;
                    //element.init();
                },
                error: function (msg) {
                    RedirectLogin();
                }
            });
        }

        function LoadMenus() {
            var mdata = localStorage.getItem("menudata");
            if (mdata != "" && mdata != undefined && mdata != null) {
                initialMenus(JSON.parse(mdata));
                return;
            }
            let token = getCookie("apptick");
            $.ajax({
                type: 'get',
                url: '/SYS/Appsetting/GetAllUserMenu/Appsetting',
                data: {},
                dataType: "json",
                beforeSend: function (request) {
                    let o = { Parameter: token, Scheme: "Bearer" };
                    request.setRequestHeader("Authorization", "Bearer " + token);
                },
                success: function (response) {
                    initialMenus(response.Data);
                    localStorage.setItem("menudata", JSON.stringify(response.Data));
                },
                error: function (msg) {
                    //RedirectLogin();
                }
            });
        }

        function initialMenus(data) {
            $.each(data, function (i, o) {
                if (o.PmenuId == 0) {
                    RenderTplHtml('menulitpl', 'navBar', o, true);
                }
                else {
                    let ptree = $('#' + o.PmenuId);
                    if (ptree != undefined && ptree != null) {
                        let existdl = ptree.find("dl");
                        if (existdl != undefined && existdl != null && existdl.length>0) {
                            DoRenderTplHtml('menuddtpl', existdl[0], o, true);
                        }
                        else {
                            DoRenderTplHtml('menudltpl', ptree.parent()[0], o, true);
                        }
                    }
                }
            });
            element.init();
        }
    </script>
    <script id="menulitpl" type="text/html">
        <li class="layui-nav-item">
            <a id="{{ d.MenuId}}"><i class="ok-icon"></i><cite>{{ d.MenuName }}</cite></a>
        </li>
    </script>
    <script id="menudltpl" type="text/html">
        <dl class="layui-nav-child">
            <dd>
                <a id="{{ d.MenuId}}" {{# if(d.MenuType==1){ }} lay-id="{{ d.MenuId}}" data-url="pages/funcpage.html?prog={{d.ProgNm}}" is-close="true" {{# } }}><i class="layui-icon"></i><cite>{{ d.MenuName }}</cite></a>
            </dd>
        </dl>
    </script>
    <script id="menuddtpl" type="text/html">
        <dd>
            <a id="{{ d.MenuId}}" {{# if(d.MenuType==1){ }} lay-id="{{ d.MenuId}}" data-url="pages/funcpage.html?prog={{d.ProgNm}}" is-close="true" {{# } }}><i class="layui-icon"></i><cite>{{ d.MenuName }}</cite></a>
        </dd>
    </script>
</body>
</html>